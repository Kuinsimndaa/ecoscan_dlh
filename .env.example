# ========================================
# EcoScan DLH - Environment Configuration
# ========================================
# This file is for Docker Compose deployment
# Copy this file to .env and update values for your environment

# ===== Database Configuration =====
# MariaDB 11.2 (optimized for low memory - 256MB)
DB_HOST=mysql
DB_USER=ecoscan_user
DB_PASSWORD=change_this_secure_password_in_production
DB_NAME=dlh_ecoscan
DB_CONNECTION_LIMIT=10

# ===== Backend Configuration =====
NODE_ENV=production
PORT=3030

# CORS Configuration
# Development: http://localhost
# Production:  http://YOUR_SERVER_IP or https://YOUR_DOMAIN
CORS_ORIGIN=http://localhost

# ===== Frontend Configuration =====
# API Base URL
# Development: http://localhost:3030
# Production:  http://YOUR_SERVER_IP:3030 or https://api.YOUR_DOMAIN
VITE_API_BASE_URL=http://localhost:3030

# App Name
VITE_APP_NAME=EcoScan DLH

# ===== Docker Configuration =====
# For local development, use 'latest'
# For production CI/CD, GitHub Actions will override these
IMAGE_TAG=latest
GITHUB_REPOSITORY=kuinsimndaa/ecoscan_dlh

# ========================================
# SETUP INSTRUCTIONS
# ========================================

# 1. COPY THIS FILE
#    Windows: Copy-Item .env.example .env
#    Linux:   cp .env.example .env

# 2. CHOOSE YOUR ENVIRONMENT
#    Option A: Local Development (on your laptop)
#    Option B: Production Deployment (on server)

# ========================================
# OPTION A: LOCAL DEVELOPMENT
# ========================================
# Use these values for testing on your laptop:
#
# DB_PASSWORD=admin123
# CORS_ORIGIN=http://localhost
# VITE_API_BASE_URL=http://localhost:3030
# NODE_ENV=development
#
# Then run: docker-compose up -d

# ========================================
# OPTION B: PRODUCTION DEPLOYMENT
# ========================================
# Update these values for production server:
#
# DB_PASSWORD=YOUR_STRONG_PASSWORD_HERE
#   Example: Xy9$mK2&pL7!qR4@
#   Requirements: 16+ chars, mixed case, numbers, symbols
#
# CORS_ORIGIN=http://eco-scan-web.momoi.my.id
#   Example: http://103.123.45.67
#   Or with domain: http://eco-scan-web.momoi.my.id
#
# VITE_API_BASE_URL=http://eco-scan-web.momoi.my.id:3030
#   Example: http://103.123.45.67:3030
#   Or with domain: http://eco-scan-web.momoi.my.id:3030
#
# NODE_ENV=production
#
# Then:
# 1. Upload .env to server (/opt/ecoscan/.env)
# 2. Configure GitHub Secrets (for CI/CD)
# 3. Push to main branch to deploy

# ========================================
# PRODUCTION CHECKLIST
# ========================================
# Before deploying to production, ensure:
#
# [ ] Strong DB_PASSWORD set (16+ chars, mixed)
# [ ] CORS_ORIGIN matches your server IP/domain
# [ ] VITE_API_BASE_URL points to production API
# [ ] NODE_ENV=production (not development!)
# [ ] File uploaded to server at /opt/ecoscan/.env
# [ ] GitHub Secrets configured (SSH_HOST, SSH_USER, etc.)
# [ ] SSL certificates ready (if using HTTPS)
# [ ] Server firewall allows ports 80, 443 (if HTTPS), 22 (SSH)

# ========================================
# SECURITY NOTES
# ========================================
# ⚠️  NEVER commit .env to Git!
# ⚠️  Use different passwords for dev/prod
# ✅  .env is in .gitignore (safe)
# ✅  Only .env.example is committed (safe)
# ✅  Database port 3306 is localhost-only (secure)

# ========================================
# RESOURCE USAGE (per application)
# ========================================
# MariaDB:  ~200-250MB (vs 450MB MySQL)
# Backend:  ~250MB (with 192MB heap limit)
# Frontend: ~64MB (Nginx)
# Total:    ~550MB per app instance
#
# 4GB Server can run:
# - 4 app instances + system overhead
# - Or 3 apps + monitoring tools
